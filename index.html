<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MyDentalClinic</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#007aff">
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background:#f5f5f7; margin:0; padding:16px; }
    h1 { text-align:center; }
    .card { background:#fff; border-radius:16px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(0,0,0,0.08); }
    input { width:100%; padding:10px; margin:6px 0; border-radius:10px; border:1px solid #ccc; }
    button { width:100%; padding:12px; border:none; border-radius:12px; background:#007aff; color:#fff; font-size:16px; margin-top:8px; }
    .patient { border-bottom:1px solid #eee; padding:8px 0; }
    .total { font-weight:600; }
  </style>
</head>
<body>
<h1>ü¶∑ MyDentalClinic</h1>

<div class="card">
  <input id="fio" placeholder="–§–ò–û –ø–∞—Ü–∏–µ–Ω—Ç–∞">
  <input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
  <input id="procedure" placeholder="–ü—Ä–æ—Ü–µ–¥—É—Ä–∞">
  <input type="date" id="date">
  <input type="time" id="time">
  <input id="duration" placeholder="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)">
  <input id="price" placeholder="–ö –æ–ø–ª–∞—Ç–µ (—Å—É–º)">
  <input id="paid" placeholder="–û–ø–ª–∞—á–µ–Ω–æ (—Å—É–º)">
  <button onclick="addPatient()">–î–æ–±–∞–≤–∏—Ç—å</button>
</div>

<div class="card">
  <h3>–ü–∞—Ü–∏–µ–Ω—Ç—ã</h3>
  <div id="list"></div>
</div>

<div class="card">
  <h3>–ö–∞—Å—Å–∞</h3>
  <div class="total" id="cash"></div>
</div>

<script>
let patients = JSON.parse(localStorage.getItem('patients') || '[]');

function addPatient(){
  patients.push({
    fio:fio.value, phone:phone.value, procedure:procedure.value,
    date:date.value, time:time.value, duration:duration.value,
    price:Number(price.value), paid:Number(paid.value)
  });
  localStorage.setItem('patients', JSON.stringify(patients));
  render();
}

function render(){
  let list=document.getElementById('list');
  let cash=document.getElementById('cash');
  list.innerHTML='';
  let tp=0, tpaid=0;
  patients.forEach(p=>{
    tp+=p.price; tpaid+=p.paid;
    list.innerHTML+=`<div class="patient">
    <b>${p.fio}</b> (${p.phone})<br>
    ${p.procedure}<br>
    ${p.date} ${p.time}<br>
    –û–ø–ª–∞—Ç–∞: ${p.paid}/${p.price}
    </div>`;
  });
  cash.innerHTML=`–í—Å–µ–≥–æ: ${tp}<br>–ü–æ–ª—É—á–µ–Ω–æ: ${tpaid}<br>–î–æ–ª–≥: ${tp-tpaid}`;
}
render();
</script>
</body>
</html>
